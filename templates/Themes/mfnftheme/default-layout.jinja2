{% set links = obj.links %}
{% set doc = obj.ownerDocument.getElementsByTagName('document')[0] %}
{% set toc = doc.tableofcontents if config.html5['display-toc'] else None %}
{% set rendererdata = obj.ownerDocument.rendererdata['html5'] %}
{% macro tocEntry(section) %}
<span class="toc_ref">{{ section.ref.textContent }}</span> <span class="toc_entry">{{ section.tocEntry }}</span>{% endmacro %}
{% macro isActive(section) %}
{% if section in links.breadcrumbs %} active{% endif %}
{% endmacro %}
{% macro isCurrent(section) %}
{% if section.url == obj.url %} current{% endif %}
{% endmacro %}
{% macro icon(icon, id='', class='') %}
<svg  {% if id %}id="{{id}}" {% endif %}class="icon icon-{{ icon }} {{ class }}"><use xlink:href="symbol-defs.svg#icon-{{ icon }}"></use></svg>
{% endmacro %}
<!DOCTYPE html>
<html>
<head>
{% if config.html5['use-mathjax'] %}
<script>
  MathJax = { 
    tex: {
{% if config.html5['mathjax-dollars'] %}
		    inlineMath: [['$','$'], ['\\(','\\)']],
{% else %}
		    inlineMath: [['\\(','\\)']],
{% endif %}
{% if config['mathjax-macros']['macros'] %}
      macros: { {% for key, val in config['mathjax-macros']['macros'].items() %}
        {{ key }}: {{ val }},
        {% endfor %}
      } 
{% endif %}
	} }
</script>
<script type="text/javascript" src="{{ config.html5['mathjax-url'] }}">
</script>
{% endif %}
<meta name="generator" content="plasTeX" />
<meta charset="{{ config.files['output-encoding']}}" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
{% if obj.title %}
<title>{{ obj.title }}</title>
{% endif %}
</head>

<body>
  <header>
    <h1>Mathe für Nicht-Freaks</h1>
    <a href="">Sitemap</a>
  </header>
  <hr/>
  {% if toc %}
  <nav class="toc">
    <ul class="sub-toc-0">
      {% for section in toc recursive %}
      <li class="{{ isActive(section) }}{{ isCurrent(section) }}">
	{% if section.tableofcontents %}
	<a href="{{ section.url }}">{{ tocEntry(section) }}</a>
	<span class="expand-toc">{% if isActive(section) %}▼{% else %}▶{% endif %}</span>
	<ul class="sub-toc-{{loop.depth}}{{ isActive(section) }}">
	  {{ loop(section.tableofcontents) }}
	</ul>
	{% else %}
	<a href="{{ section.url }}">{{ tocEntry(section) }}</a>
	{% endif %}
      </li>
      {% endfor %}
      {% for item in rendererdata.get('extra_toc_items', []) %}
      <li {% if item.url == obj.url %}class="current"{% endif %}><a href="{{ item.url }}">{{ item.text }}</a></li>
      {% endfor %}
    </ul>
  </nav>
  <hr/>
  {% endif %}
  <article>
    {{ obj }}
  </article>
  {% if obj.tableofcontents and obj.level <= config.html5['localtoc-level'] %}
					     <hr/>
<nav class=local_toc>
<ul>
{% for section in obj.tableofcontents recursive %}
  <li>  
  <a href="{{ section.url }}">{{ tocEntry(section) }}</a>
  {% if section.tableofcontents %}
        <ul>
                 {{ loop(section.tableofcontents) }}
        </ul>
  {% endif %}
  </li>
{% endfor %}
</ul>
</nav>
{% endif %}
{% if obj.footnotes %}
<hr/>
  <footer id="footnotes">
    <ol>
      {% for footnote in obj.footnotes %}
      <li id="{{ footnote.id }}">{{ footnote }}</li>
      {% endfor %}
    </ol>
  </footer>
  {% endif %}
</body>
</html>
